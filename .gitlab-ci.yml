stages:
  - module-pipelines

variables:
  VERSION: 1.0.${CI_PIPELINE_ID}
  
kubernetes:
  stage: module-pipelines
  trigger:
    include:
      - 'kubernetes/.gitlab-ci-kubernetes.yml'
    strategy: depend
  only:
    changes:  # как только происходит изменение в папке kubernetes, запускается дочерний пайплайн, который лежит в этой папке
      - kubernetes/**/*
      
HELM:
  stage: module-pipelines
  trigger:
    include:
      - 'HELM/.gitlab-ci-HELM.yml'
    strategy: depend
  only:
    changes:  # как только происходит изменение в папке kubernetes, запускается дочерний пайплайн, который лежит в этой папке
      - HELM/**/*

HELM-Monitoring:
  stage: module-pipelines
  trigger:
    include:
      - 'HELM-Monitoring/.gitlab-ci-HELM-Monitoring.yml'
    strategy: depend
  only:
    changes:  # как только происходит изменение в папке kubernetes, запускается дочерний пайплайн, который лежит в этой папке
      - HELM-Monitoring/**/*